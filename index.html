<!DOCTYPE html>
<html>
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128068727-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-128068727-1');
    </script>
    <!-- END Global site tag (gtag.js) - Google Analytics -->


    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js'></script>
</head>

<body>
    <div class="center">
    <h1>Fakir v2</h1>
    <p>Simple fake data generator</p>
    </div>

    <div id="app">
        <div>Chart type
        <select v-model=activeType>
            <option v-for="chart in charts" v-bind:value=chart.type>{{chart.type}}</option>
        </select>
        </div>
        
        <div v-for="chart in charts" v-if="activeType==chart.type" class="indent-1">
            <div v-for="(settingsOfParam, param) in chart.settings" v-bind:class="['indent-2', settingsOfParam.isActive ? '':'unactive' ]">
                
                <div class="settingsTitle"> 
                    <input v-if="!settingsOfParam.isMandatory" type="checkbox" v-model=settingsOfParam.isActive>  {{param}} : 
                </div>
                <div v-for="(value, settings) in settingsOfParam.settings" v-bind:class="['indent-3', settingsOfParam.isActive ? '':'unactive' ]">
                    {{settings}} :
                        <input v-model=value.value :type=value.type v-if="!_.includes(['textarea','select'], value.type)">
                        <select v-if="value.type=='select'" v-model=value.value>
                            <option v-for="option in value.options" v-bind:value=option>{{option}}</option>
                        </select>
                        <textarea v-if="value.type=='textarea'" v-model=value.value>
                            
                        </textarea>
                </div>
            </div>
        </div>
    </div>

    <div class="center">
    <button id='generateButton' type="button" onclick="app.generateAndDownload()"> Download fake data </button>
    <p> Made with <3 for Toucan Toco concepteur </p>
    </div>
</body>
<script src="script.js"></script>
</html>